name: CD Pipeline (Deploy & Notify)

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # 1. DÃ©clencher Render
      - name: Trigger Render Deployment
        run: |
          curl -X POST ${{ secrets.RENDER_DEPLOY_HOOK }}

      # 2. Notification Discord StylÃ©e
      - name: Notify Discord
        uses: discord-actions/message@v2
        with:
          webhookUrl: ${{ secrets.DISCORD_WEBHOOK }}
          message: "ðŸš€ **DÃ‰PLOIEMENT RÃ‰USSI !** \n\nLe site a Ã©tÃ© mis Ã  jour sur Render. \nðŸ”— Voir le site : https://mon-projet-devops.onrender.com"
          color: 0x00FF00